---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import Section from "../components/Section.astro";
import SectionHeading from "../components/SectionHeading.astro";
import CTAButton from "../components/CTAButton.astro";
import CTASection from "../components/CTASection.astro";
import TerminalWindow from "../components/TerminalWindow.astro";
---

<BaseLayout
  title="QR Code API Documentation â€” QR for Agent"
  description="API reference, MCP setup, and curl examples for QR for Agent. Create dynamic QR codes in 30 seconds with REST or MCP."
>
  <!-- Section 1: Hero -->
  <Hero
    title="QR for Agent Documentation"
    subtitle="Everything you need to create, update, and track dynamic QR codes -- via MCP or REST API."
  />

  <!-- Section 1b: Quick Start -->
  <Section background="default">
    <SectionHeading title="Quick Start" align="left" />

    <p class="mb-10 text-(--text-body) text-muted-foreground">
      From zero to your first QR code in 30 seconds.
    </p>

    <!-- Step 1 -->
    <div class="mb-12">
      <div class="mb-4 flex items-baseline gap-4">
        <span class="font-mono text-(--text-h2) font-bold text-foreground">1</span>
        <h3 class="text-(--text-h3) font-bold text-foreground">Install the MCP server</h3>
      </div>
      <TerminalWindow>
        <pre><code><span class="text-code-green">$</span> npx qr-for-agent</code></pre>
      </TerminalWindow>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        Works with Claude Desktop, Cursor, and any MCP-compatible client.
      </p>
    </div>

    <!-- Step 2 -->
    <div class="mb-12">
      <div class="mb-4 flex items-baseline gap-4">
        <span class="font-mono text-(--text-h2) font-bold text-foreground">2</span>
        <h3 class="text-(--text-h3) font-bold text-foreground">Get your API key</h3>
      </div>
      <CTAButton href="/get-started" text="Get Your API Key" variant="primary" />
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        Your key follows the format <code class="font-mono text-code-green">qr_</code> + 32-character random string. Keep it in your environment variables.
      </p>
    </div>

    <!-- Step 3 -->
    <div class="mb-12">
      <div class="mb-4 flex items-baseline gap-4">
        <span class="font-mono text-(--text-h2) font-bold text-foreground">3</span>
        <h3 class="text-(--text-h3) font-bold text-foreground">Create your first QR code</h3>
      </div>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        Ask your agent:
      </p>
      <TerminalWindow title="Prompt">
        <pre><code>Create a dynamic QR code for https://example.com</code></pre>
      </TerminalWindow>
      <p class="mt-6 mb-4 text-(--text-body) text-muted-foreground">
        Or call the REST API directly:
      </p>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl -X POST https://api.qragentcore.com/api/qr \
  -H "Content-Type: application/json" \
  -H "X-API-Key: qr_YOUR_KEY_HERE" \
  -d '&#123;"target_url": "https://example.com", "label": "My first QR"&#125;'</code></pre>
      </TerminalWindow>
      <div class="mt-6">
        <TerminalWindow title="Response">
          <pre><code class="text-code-green">{`{
  "id": 1,
  "short_id": "wkQ5W-fm",
  "short_url": "https://api.qragentcore.com/r/wkQ5W-fm",
  "target_url": "https://example.com",
  "label": "My first QR",
  "format": "svg",
  "image_data": "<svg>...</svg>",
  "created_at": "2026-02-24T10:00:00.000Z"
}`}</code></pre>
        </TerminalWindow>
      </div>
    </div>

    <p class="text-(--text-body) text-muted-foreground">
      That's it. One command, one API call, one QR code. The short URL redirects to your target -- and you can change the target later without regenerating the image.
    </p>
  </Section>

  <!-- Section 2: MCP Setup -->
  <Section background="muted">
    <SectionHeading title="MCP Setup" align="left" />

    <p class="mb-10 text-(--text-body) text-muted-foreground">
      QR for Agent ships as a standalone MCP server on npm. One package, 9 tools, 3 dependencies.
    </p>

    <!-- Claude Desktop -->
    <div class="mb-10">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Claude Desktop</h3>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        Add to your <code class="font-mono text-code-green">claude_desktop_config.json</code>:
      </p>
      <TerminalWindow title="claude_desktop_config.json">
        <pre><code class="text-code-green">{`{
  "mcpServers": {
    "qr-for-agent": {
      "command": "npx",
      "args": ["-y", "qr-for-agent"],
      "env": {
        "API_KEY": "your-api-key",
        "BASE_URL": "https://api.qragentcore.com"
      }
    }
  }
}`}</code></pre>
      </TerminalWindow>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        Restart Claude Desktop. Your agent now has 6 QR code tools available.
      </p>
    </div>

    <!-- Cursor -->
    <div class="mb-10">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Cursor</h3>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        Add to <code class="font-mono text-code-green">.cursor/mcp.json</code> in your project root:
      </p>
      <TerminalWindow title=".cursor/mcp.json">
        <pre><code class="text-code-green">{`{
  "mcpServers": {
    "qr-for-agent": {
      "command": "npx",
      "args": ["-y", "qr-for-agent"],
      "env": {
        "API_KEY": "your-api-key",
        "BASE_URL": "https://api.qragentcore.com"
      }
    }
  }
}`}</code></pre>
      </TerminalWindow>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        Reload the window. The tools appear in Cursor's MCP panel.
      </p>
    </div>

    <!-- Any MCP client -->
    <div>
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Any MCP client</h3>
      <p class="text-(--text-body) text-muted-foreground">
        The server runs via <code class="font-mono text-code-green">npx qr-for-agent</code> and communicates over stdio. Any client that supports the MCP standard can use it. Set <code class="font-mono text-code-green">API_KEY</code> and <code class="font-mono text-code-green">BASE_URL</code> as environment variables.
      </p>
    </div>
  </Section>

  <!-- Section 3: API Reference -->
  <Section background="default">
    <SectionHeading title="API Reference" align="left" />

    <p class="mb-10 text-(--text-body) text-muted-foreground">
      All <code class="font-mono text-code-green">/api/*</code> endpoints require an <code class="font-mono text-code-green">X-API-Key</code> header. Public endpoints (<code class="font-mono text-code-green">/r/*</code>, <code class="font-mono text-code-green">/i/*</code>) don't require auth.
    </p>

    <!-- QR Code Endpoints table -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">QR Code Endpoints</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Method</th>
            <th class="px-4 py-3 font-medium text-foreground">Path</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
            <th class="px-4 py-3 font-medium text-foreground">Auth</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">POST</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr</td>
            <td class="px-4 py-3 text-muted-foreground">Create a new dynamic QR code</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr</td>
            <td class="px-4 py-3 text-muted-foreground">List all QR codes (paginated)</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Get QR code details</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">PATCH</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Update target URL or label</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">DELETE</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Delete QR code and analytics</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/qr/:shortId/image</td>
            <td class="px-4 py-3 text-muted-foreground">Download QR image</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Analytics Endpoint table -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Analytics Endpoint</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Method</th>
            <th class="px-4 py-3 font-medium text-foreground">Path</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
            <th class="px-4 py-3 font-medium text-foreground">Auth</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/analytics/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Scan count and recent events</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Webhook Endpoints table -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Webhook Endpoints</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Method</th>
            <th class="px-4 py-3 font-medium text-foreground">Path</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
            <th class="px-4 py-3 font-medium text-foreground">Auth</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">POST</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/webhooks</td>
            <td class="px-4 py-3 text-muted-foreground">Register a webhook endpoint</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/webhooks</td>
            <td class="px-4 py-3 text-muted-foreground">List all webhooks</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">DELETE</td>
            <td class="px-4 py-3 font-mono text-code-green">/api/webhooks/:id</td>
            <td class="px-4 py-3 text-muted-foreground">Delete a webhook</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Public Endpoints table -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Public Endpoints</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Method</th>
            <th class="px-4 py-3 font-medium text-foreground">Path</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
            <th class="px-4 py-3 font-medium text-foreground">Auth</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/r/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Redirect to target URL (records scan)</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/i/:shortId</td>
            <td class="px-4 py-3 text-muted-foreground">Serve QR image (cacheable)</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/health</td>
            <td class="px-4 py-3 text-muted-foreground">Health check</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">GET</td>
            <td class="px-4 py-3 font-mono text-code-green">/documentation</td>
            <td class="px-4 py-3 text-muted-foreground">Swagger UI (OpenAPI docs)</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- POST /api/qr -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">POST /api/qr -- Create a QR code</h3>
      <p class="mb-4 font-medium text-foreground">Request body:</p>
      <div class="mb-6 overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border text-left">
              <th class="px-4 py-3 font-medium text-foreground">Parameter</th>
              <th class="px-4 py-3 font-medium text-foreground">Type</th>
              <th class="px-4 py-3 font-medium text-foreground">Required</th>
              <th class="px-4 py-3 font-medium text-foreground">Default</th>
              <th class="px-4 py-3 font-medium text-foreground">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">target_url</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">Yes</td>
              <td class="px-4 py-3 text-muted-foreground">--</td>
              <td class="px-4 py-3 text-muted-foreground">The destination URL. Must be a fully-qualified absolute URL.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">label</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">null</td>
              <td class="px-4 py-3 text-muted-foreground">A human-readable label for organizing QR codes.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">format</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"svg"</td>
              <td class="px-4 py-3 text-muted-foreground">Image format: <code class="font-mono text-code-green">"svg"</code> (recommended) or <code class="font-mono text-code-green">"png"</code>.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">foreground_color</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"#000000"</td>
              <td class="px-4 py-3 text-muted-foreground">Hex color for QR code dots.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">background_color</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"#ffffff"</td>
              <td class="px-4 py-3 text-muted-foreground">Hex color for QR code background.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">dot_style</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"square"</td>
              <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">"square"</code>, <code class="font-mono text-code-green">"rounded"</code>, <code class="font-mono text-code-green">"dots"</code>, or <code class="font-mono text-code-green">"classy-rounded"</code>.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">corner_style</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"square"</td>
              <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">"square"</code>, <code class="font-mono text-code-green">"extra-rounded"</code>, or <code class="font-mono text-code-green">"dot"</code>.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">logo_url</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 text-muted-foreground">--</td>
              <td class="px-4 py-3 text-muted-foreground">URL to a logo image (PNG/JPG/SVG) or <code class="font-mono text-code-green">data:</code> URI. Centered on the QR code.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">logo_size</td>
              <td class="px-4 py-3 text-muted-foreground">number</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">0.2</td>
              <td class="px-4 py-3 text-muted-foreground">Logo size as ratio of QR width (0.15-0.3).</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">width</td>
              <td class="px-4 py-3 text-muted-foreground">integer</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">400</td>
              <td class="px-4 py-3 text-muted-foreground">QR code width in pixels (200-2000).</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">margin</td>
              <td class="px-4 py-3 text-muted-foreground">integer</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">2</td>
              <td class="px-4 py-3 text-muted-foreground">Quiet zone margin in modules (0-10).</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">error_correction</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">"M"</td>
              <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">"L"</code> (7%), <code class="font-mono text-code-green">"M"</code> (15%), <code class="font-mono text-code-green">"Q"</code> (25%), <code class="font-mono text-code-green">"H"</code> (30%). Auto-set to H with logo.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p class="mb-4 font-medium text-foreground">Basic request:</p>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl -X POST https://api.qragentcore.com/api/qr \
  -H "Content-Type: application/json" \
  -H "X-API-Key: qr_YOUR_KEY" \
  -d '&#123;
    "target_url": "https://conf.example.com/2026",
    "label": "Conference landing page",
    "format": "svg"
  &#125;'</code></pre>
      </TerminalWindow>

      <p class="mt-6 mb-4 font-medium text-foreground">Styled request (colors, rounded dots, logo):</p>
      <TerminalWindow title="Styled Request">
        <pre><code><span class="text-code-green">$</span> curl -X POST https://api.qragentcore.com/api/qr \
  -H "Content-Type: application/json" \
  -H "X-API-Key: qr_YOUR_KEY" \
  -d '&#123;
    "target_url": "https://conf.example.com/2026",
    "label": "Branded QR",
    "foreground_color": "#4F46E5",
    "background_color": "#F9FAFB",
    "dot_style": "rounded",
    "corner_style": "extra-rounded",
    "logo_url": "https://example.com/logo.png",
    "logo_size": 0.25
  &#125;'</code></pre>
      </TerminalWindow>
      <p class="mt-6 mb-4 font-medium text-foreground">Response (201):</p>
      <TerminalWindow title="Response">
        <pre><code class="text-code-green">{`{
  "id": 1,
  "short_id": "wkQ5W-fm",
  "short_url": "https://api.qragentcore.com/r/wkQ5W-fm",
  "target_url": "https://conf.example.com/2026",
  "label": "Conference landing page",
  "format": "svg",
  "image_data": "<svg>...</svg>",
  "created_at": "2026-02-24T10:00:00.000Z"
}`}</code></pre>
      </TerminalWindow>
    </div>

    <!-- PATCH /api/qr/:shortId -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">PATCH /api/qr/:shortId -- Update destination</h3>
      <p class="mb-6 text-(--text-body) text-muted-foreground">
        The QR image stays the same. Only the redirect target changes. This is the core dynamic link feature.
      </p>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl -X PATCH https://api.qragentcore.com/api/qr/wkQ5W-fm \
  -H "Content-Type: application/json" \
  -H "X-API-Key: qr_YOUR_KEY" \
  -d '&#123;"target_url": "https://new-destination.com"&#125;'</code></pre>
      </TerminalWindow>
    </div>

    <!-- GET /api/qr -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">GET /api/qr -- List QR codes</h3>
      <p class="mb-4 font-medium text-foreground">Query parameters:</p>
      <div class="mb-6 overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border text-left">
              <th class="px-4 py-3 font-medium text-foreground">Parameter</th>
              <th class="px-4 py-3 font-medium text-foreground">Type</th>
              <th class="px-4 py-3 font-medium text-foreground">Default</th>
              <th class="px-4 py-3 font-medium text-foreground">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">limit</td>
              <td class="px-4 py-3 text-muted-foreground">integer</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">20</td>
              <td class="px-4 py-3 text-muted-foreground">Max results (1-100).</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">offset</td>
              <td class="px-4 py-3 text-muted-foreground">integer</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">0</td>
              <td class="px-4 py-3 text-muted-foreground">Number of records to skip.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl https://api.qragentcore.com/api/qr?limit=10&offset=0 \
  -H "X-API-Key: qr_YOUR_KEY"</code></pre>
      </TerminalWindow>
    </div>

    <!-- GET /api/analytics/:shortId -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">GET /api/analytics/:shortId -- Scan analytics</h3>
      <p class="mb-6 text-(--text-body) text-muted-foreground">
        Returns total scan count and the 50 most recent scan events.
      </p>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl https://api.qragentcore.com/api/analytics/wkQ5W-fm \
  -H "X-API-Key: qr_YOUR_KEY"</code></pre>
      </TerminalWindow>
      <p class="mt-6 mb-4 font-medium text-foreground">Response:</p>
      <TerminalWindow title="Response">
        <pre><code class="text-code-green">{`{
  "short_id": "wkQ5W-fm",
  "total_scans": 142,
  "recent_scans": [
    {
      "scanned_at": "2026-02-24T14:32:00.000Z",
      "user_agent": "Mozilla/5.0 ...",
      "referer": null
    }
  ]
}`}</code></pre>
      </TerminalWindow>
    </div>

    <!-- DELETE /api/qr/:shortId -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">DELETE /api/qr/:shortId -- Delete a QR code</h3>
      <p class="mb-6 text-(--text-body) text-muted-foreground">
        Permanently removes the QR code and all associated scan analytics. The short URL stops working immediately. This cannot be undone.
      </p>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl -X DELETE https://api.qragentcore.com/api/qr/wkQ5W-fm \
  -H "X-API-Key: qr_YOUR_KEY"</code></pre>
      </TerminalWindow>
    </div>

    <!-- POST /api/webhooks -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">POST /api/webhooks -- Register a webhook</h3>
      <p class="mb-6 text-(--text-body) text-muted-foreground">
        Register an endpoint to receive real-time POST notifications when your QR codes are scanned. Returns an HMAC-SHA256 secret for signature verification -- store it securely, it is only shown once.
      </p>
      <p class="mb-4 font-medium text-foreground">Request body:</p>
      <div class="mb-6 overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border text-left">
              <th class="px-4 py-3 font-medium text-foreground">Parameter</th>
              <th class="px-4 py-3 font-medium text-foreground">Type</th>
              <th class="px-4 py-3 font-medium text-foreground">Required</th>
              <th class="px-4 py-3 font-medium text-foreground">Default</th>
              <th class="px-4 py-3 font-medium text-foreground">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">url</td>
              <td class="px-4 py-3 text-muted-foreground">string</td>
              <td class="px-4 py-3 text-muted-foreground">Yes</td>
              <td class="px-4 py-3 text-muted-foreground">--</td>
              <td class="px-4 py-3 text-muted-foreground">The HTTP/HTTPS endpoint that will receive webhook events.</td>
            </tr>
            <tr class="border-b border-border">
              <td class="px-4 py-3 font-mono text-code-green">events</td>
              <td class="px-4 py-3 text-muted-foreground">string[]</td>
              <td class="px-4 py-3 text-muted-foreground">No</td>
              <td class="px-4 py-3 font-mono text-muted-foreground">["qr.scanned"]</td>
              <td class="px-4 py-3 text-muted-foreground">Events to subscribe to. Currently supported: <code class="font-mono text-code-green">"qr.scanned"</code>.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <TerminalWindow title="Request">
        <pre><code><span class="text-code-green">$</span> curl -X POST https://api.qragentcore.com/api/webhooks \
  -H "Content-Type: application/json" \
  -H "X-API-Key: qr_YOUR_KEY" \
  -d '&#123;"url": "https://your-server.com/webhook"&#125;'</code></pre>
      </TerminalWindow>
      <p class="mt-6 mb-4 font-medium text-foreground">Response (201):</p>
      <TerminalWindow title="Response">
        <pre><code class="text-code-green">{`{
  "id": 1,
  "url": "https://your-server.com/webhook",
  "secret": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6",
  "events": ["qr.scanned"],
  "is_active": true,
  "created_at": "2026-02-27T10:00:00.000Z"
}`}</code></pre>
      </TerminalWindow>

      <p class="mt-8 mb-4 font-medium text-foreground">Webhook payload (sent to your endpoint):</p>
      <TerminalWindow title="Webhook Event">
        <pre><code class="text-code-green">{`{
  "event": "qr.scanned",
  "timestamp": "2026-02-27T14:32:00.000Z",
  "data": {
    "short_id": "wkQ5W-fm",
    "target_url": "https://example.com",
    "label": "My QR",
    "scan": {
      "user_agent": "Mozilla/5.0 ...",
      "referer": null,
      "ip": "203.0.113.42",
      "scanned_at": "2026-02-27T14:32:00.000Z"
    }
  }
}`}</code></pre>
      </TerminalWindow>

      <p class="mt-8 mb-4 font-medium text-foreground">Verifying signatures:</p>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        Every webhook request includes an <code class="font-mono text-code-green">X-Webhook-Signature</code> header containing an HMAC-SHA256 hex digest of the request body, signed with your webhook secret.
      </p>
      <TerminalWindow title="Signature verification (Node.js)">
        <pre><code class="text-code-green">{`import crypto from "node:crypto";

function verifySignature(body, signature, secret) {
  const expected = crypto
    .createHmac("sha256", secret)
    .update(body)
    .digest("hex");
  return signature === expected;
}`}</code></pre>
      </TerminalWindow>
    </div>

    <!-- Authentication -->
    <div>
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Authentication</h3>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        All <code class="font-mono text-code-green">/api/*</code> endpoints require an <code class="font-mono text-code-green">X-API-Key</code> header.
      </p>
      <ul class="space-y-2 text-(--text-body) text-muted-foreground">
        <li><span class="font-medium text-foreground">Format:</span> <code class="font-mono text-code-green">qr_</code> + 32-character random string</li>
        <li><span class="font-medium text-foreground">Multi-tenant:</span> each API key only sees its own QR codes</li>
        <li><span class="font-medium text-foreground">Isolation:</span> no data leaks between API keys -- build agents for multiple clients safely</li>
      </ul>
    </div>
  </Section>

  <!-- Section 4: MCP Tools -->
  <Section background="muted">
    <SectionHeading title="MCP Tools" align="left" />

    <p class="mb-10 text-(--text-body) text-muted-foreground">
      9 tools. No context bloat, no "too many tools" problem. Each tool maps 1:1 to a REST endpoint.
    </p>

    <!-- QR Code Tools -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">QR Code Tools</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Tool</th>
            <th class="px-4 py-3 font-medium text-foreground">Key Parameters</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">create_qr_code</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">target_url</code>, <code class="font-mono text-code-green">format</code>, <code class="font-mono text-code-green">dot_style</code>, <code class="font-mono text-code-green">corner_style</code>, <code class="font-mono text-code-green">foreground_color</code>, <code class="font-mono text-code-green">logo_url</code>, ...</td>
            <td class="px-4 py-3 text-muted-foreground">Create a custom-styled dynamic QR code.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">get_qr_code</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">short_id</code></td>
            <td class="px-4 py-3 text-muted-foreground">Retrieve details and metadata for an existing QR code.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">update_qr_destination</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">short_id</code>, <code class="font-mono text-code-green">target_url</code>, <code class="font-mono text-code-green">label</code></td>
            <td class="px-4 py-3 text-muted-foreground">Change redirect target without regenerating the image.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">list_qr_codes</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">limit</code>, <code class="font-mono text-code-green">offset</code></td>
            <td class="px-4 py-3 text-muted-foreground">List all QR codes with pagination.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">delete_qr_code</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">short_id</code></td>
            <td class="px-4 py-3 text-muted-foreground">Delete a QR code and its scan analytics.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">get_qr_analytics</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">short_id</code></td>
            <td class="px-4 py-3 text-muted-foreground">Get scan count and recent scan events.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Webhook Tools -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Webhook Tools</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Tool</th>
            <th class="px-4 py-3 font-medium text-foreground">Key Parameters</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">create_webhook</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">url</code>, <code class="font-mono text-code-green">events</code></td>
            <td class="px-4 py-3 text-muted-foreground">Register an endpoint for real-time scan notifications (HMAC-signed).</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">list_webhooks</td>
            <td class="px-4 py-3 text-muted-foreground">--</td>
            <td class="px-4 py-3 text-muted-foreground">List all registered webhook endpoints.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green whitespace-nowrap">delete_webhook</td>
            <td class="px-4 py-3 text-muted-foreground"><code class="font-mono text-code-green">webhook_id</code></td>
            <td class="px-4 py-3 text-muted-foreground">Remove a webhook endpoint.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Tool details -->
    <h3 class="mb-6 text-(--text-h3) font-bold text-foreground">Tool details</h3>

    <div class="mb-8">
      <p class="mb-2 font-mono font-medium text-code-green">create_qr_code</p>
      <p class="text-(--text-body) text-muted-foreground">
        Creates a custom-styled QR code with full control over appearance: colors, dot shapes (square, rounded, dots, classy-rounded), corner shapes (square, extra-rounded, dot), and optional logo embedding. The QR code points to a short URL that redirects to your target. Change the target later without regenerating the image.
      </p>
    </div>

    <div class="mb-8">
      <p class="mb-2 font-mono font-medium text-code-green">update_qr_destination</p>
      <p class="text-(--text-body) text-muted-foreground">
        This is the key "dynamic link" feature: the QR image stays the same, but scanning it goes to the new URL. Use it to update campaigns, fix broken links, or A/B test landing pages.
      </p>
    </div>

    <div class="mb-8">
      <p class="mb-2 font-mono font-medium text-code-green">create_webhook</p>
      <p class="text-(--text-body) text-muted-foreground">
        Register a webhook endpoint to get real-time notifications when any of your QR codes is scanned. Each webhook delivery is signed with HMAC-SHA256 for verification. The secret is only returned at creation time.
      </p>
    </div>

    <div>
      <p class="mb-2 font-mono font-medium text-code-green">get_qr_analytics</p>
      <p class="text-(--text-body) text-muted-foreground">
        Returns aggregated scan statistics and recent scan events. Your agent can pull analytics and adjust campaigns without opening a dashboard.
      </p>
    </div>
  </Section>

  <!-- Section 5: Environment Variables -->
  <Section background="default">
    <SectionHeading title="Environment Variables" align="left" />

    <!-- MCP Server -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">MCP Server (qr-for-agent)</h3>
    <div class="mb-10 overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Variable</th>
            <th class="px-4 py-3 font-medium text-foreground">Required</th>
            <th class="px-4 py-3 font-medium text-foreground">Default</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">API_KEY</td>
            <td class="px-4 py-3 text-muted-foreground">Yes</td>
            <td class="px-4 py-3 text-muted-foreground">--</td>
            <td class="px-4 py-3 text-muted-foreground">Your QR for Agent API key. Format: <code class="font-mono text-code-green">qr_</code> + 32 chars.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">BASE_URL</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">http://localhost:3100</td>
            <td class="px-4 py-3 text-muted-foreground">The URL of your QR for Agent instance. Use <code class="font-mono text-code-green">https://api.qragentcore.com</code> for the hosted service.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Self-Hosted Server -->
    <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Self-Hosted Server</h3>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-border text-left">
            <th class="px-4 py-3 font-medium text-foreground">Variable</th>
            <th class="px-4 py-3 font-medium text-foreground">Required</th>
            <th class="px-4 py-3 font-medium text-foreground">Default</th>
            <th class="px-4 py-3 font-medium text-foreground">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">PORT</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">3100</td>
            <td class="px-4 py-3 text-muted-foreground">HTTP port.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">HOST</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">0.0.0.0</td>
            <td class="px-4 py-3 text-muted-foreground">Bind address.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">BASE_URL</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">http://localhost:3100</td>
            <td class="px-4 py-3 text-muted-foreground">Public URL used in generated short URLs. Set this to your domain.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">DATABASE_URL</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">./data/qr-agent.db</td>
            <td class="px-4 py-3 text-muted-foreground">SQLite file path.</td>
          </tr>
          <tr class="border-b border-border">
            <td class="px-4 py-3 font-mono text-code-green">SHORT_ID_LENGTH</td>
            <td class="px-4 py-3 text-muted-foreground">No</td>
            <td class="px-4 py-3 font-mono text-muted-foreground">8</td>
            <td class="px-4 py-3 text-muted-foreground">Length of generated short IDs.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </Section>

  <!-- Section 6: Self-Hosting -->
  <Section background="muted">
    <SectionHeading title="Self-Hosting" align="left" />

    <p class="mb-10 text-(--text-body) text-muted-foreground">
      QR for Agent is open source and MIT-licensed. Run it on your own infrastructure or use the hosted service. Your call.
    </p>

    <!-- Docker -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Docker</h3>
      <TerminalWindow>
        <pre><code><span class="text-code-green">$</span> git clone https://github.com/benswel/qr-agent-core.git
<span class="text-code-green">$</span> cd qr-agent-core
<span class="text-code-green">$</span> docker compose up -d</code></pre>
      </TerminalWindow>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        The database is persisted in a Docker volume. Your server runs at <code class="font-mono text-code-green">http://localhost:3100</code>.
      </p>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        On first startup, an API key is auto-generated and printed to the console. Use <code class="font-mono text-code-green">docker compose logs</code> to retrieve it.
      </p>

      <p class="mt-6 mb-4 font-medium text-foreground">docker-compose.yml:</p>
      <TerminalWindow title="docker-compose.yml">
        <pre><code class="text-code-green">{`services:
  qr-agent-core:
    build: .
    ports:
      - "3100:3100"
    volumes:
      - qr-data:/app/data
    environment:
      - PORT=3100
      - HOST=0.0.0.0
      - BASE_URL=https://your-domain.com
      - DATABASE_URL=/app/data/qr-agent.db
    restart: unless-stopped

volumes:
  qr-data:`}</code></pre>
      </TerminalWindow>
    </div>

    <!-- Railway -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Railway</h3>
      <p class="mb-4 text-(--text-body) text-muted-foreground">
        The project includes <code class="font-mono text-code-green">railway.toml</code> and a multi-stage <code class="font-mono text-code-green">Dockerfile</code>. Deploy in three steps:
      </p>
      <ol class="mb-4 list-decimal space-y-2 pl-6 text-(--text-body) text-muted-foreground">
        <li>Fork the repo on GitHub</li>
        <li>Connect it to Railway</li>
        <li>Railway builds and deploys automatically with health checks on <code class="font-mono text-code-green">/health</code></li>
      </ol>
      <p class="text-(--text-body) text-muted-foreground">
        Set <code class="font-mono text-code-green">BASE_URL</code> to your Railway domain in the environment variables.
      </p>
    </div>

    <!-- Without Docker -->
    <div class="mb-12">
      <h3 class="mb-4 text-(--text-h3) font-bold text-foreground">Without Docker</h3>
      <TerminalWindow>
        <pre><code><span class="text-code-green">$</span> git clone https://github.com/benswel/qr-agent-core.git
<span class="text-code-green">$</span> cd qr-agent-core
<span class="text-code-green">$</span> npm install
<span class="text-code-green">$</span> npm run dev</code></pre>
      </TerminalWindow>
      <p class="mt-4 text-(--text-body) text-muted-foreground">
        On first startup, an API key is auto-generated and printed to the console.
      </p>
      <p class="mt-6 mb-4 font-medium text-foreground">Managing API keys:</p>
      <TerminalWindow>
        <pre><code><span class="text-code-green">$</span> npm run key:create "my-label"   <span class="text-muted-foreground"># Create a new API key</span>
<span class="text-code-green">$</span> npm run key:list                 <span class="text-muted-foreground"># List all API keys</span></code></pre>
      </TerminalWindow>
    </div>

    <p class="mb-6 text-(--text-body) text-muted-foreground">
      Teams keep rebuilding small but critical utilities -- QR codes, short URLs, tokens -- over and over again. We built it once, correctly, and opened the source.
    </p>

    <CTAButton
      href="https://github.com/benswel/qr-agent-core"
      text="View on GitHub"
      variant="outline"
      size="lg"
      external={true}
    />
  </Section>

  <!-- Section 7: CTA -->
  <CTASection
    title="Start building"
    description="Free tier. Full API access. No credit card."
    primaryCTA={{ text: "Get Your API Key", href: "/get-started" }}
    secondaryCTA={{ text: "View on GitHub", href: "https://github.com/benswel/qr-agent-core" }}
  >
    <div class="mt-8 mb-2">
      <TerminalWindow>
        <pre><code><span class="text-code-green">$</span> npx qr-for-agent</code></pre>
      </TerminalWindow>
    </div>
  </CTASection>

  <!-- Post-CTA note -->
  <Section background="default" padding="default">
    <p class="text-center text-(--text-body) text-muted-foreground">
      Questions? Open an issue on <a href="https://github.com/benswel/qr-agent-core/issues" class="underline hover:text-foreground" target="_blank" rel="noopener noreferrer">GitHub</a> or check the <a href="https://api.qragentcore.com/documentation" class="underline hover:text-foreground" target="_blank" rel="noopener noreferrer">OpenAPI docs</a> (Swagger UI).
    </p>
  </Section>
</BaseLayout>
